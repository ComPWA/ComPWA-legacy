set(PACKAGE_NAME easyloggingpp)

# Define library
add_library(${PACKAGE_NAME} OBJECT easylogging++.cc)
target_include_directories(
  ${PACKAGE_NAME} PUBLIC $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}>
                         $<INSTALL_INTERFACE:${CMAKE_INSTALL_INCLUDEDIR}>
)
target_compile_options(${PACKAGE_NAME} PUBLIC -DELPP_NO_DEFAULT_LOG_FILE)

# Install and export
set(ELPP_INCLUDE_DIRS
    ${CMAKE_CURRENT_SOURCE_DIR}
    CACHE INTERNAL ""
)
install(FILES easylogging++.h DESTINATION ${CMAKE_INSTALL_INCLUDEDIR})
install(
  TARGETS ${PACKAGE_NAME}
  LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
  ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR}
)
